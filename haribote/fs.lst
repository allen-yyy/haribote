     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_hlt
     7 00000000                                 	EXTERN	_task_alloc
     8 00000000                                 	EXTERN	_memman_alloc_4k
     9 00000000                                 	EXTERN	_task_run
    10 00000000                                 [FILE "fs.c"]
    11                                          [SECTION .text]
    12 00000000                                 	GLOBAL	_FS_task
    13 00000000                                 _FS_task:
    14 00000000 55                              	PUSH	EBP
    15 00000001 89 E5                           	MOV	EBP,ESP
    16 00000003                                 L2:
    17 00000003 E8 [00000000]                   	CALL	_io_hlt
    18 00000008 EB F9                           	JMP	L2
    19 0000000A                                 	GLOBAL	_FSEntry
    20 0000000A                                 _FSEntry:
    21 0000000A 55                              	PUSH	EBP
    22 0000000B 89 E5                           	MOV	EBP,ESP
    23 0000000D 56                              	PUSH	ESI
    24 0000000E 53                              	PUSH	EBX
    25 0000000F 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
    26 00000012 E8 [00000000]                   	CALL	_task_alloc
    27 00000017 68 00010000                     	PUSH	65536
    28 0000001C 89 C3                           	MOV	EBX,EAX
    29 0000001E FF 76 04                        	PUSH	DWORD [4+ESI]
    30 00000021 E8 [00000000]                   	CALL	_memman_alloc_4k
    31 00000026 05 00010000                     	ADD	EAX,65536
    32 0000002B 89 43 64                        	MOV	DWORD [100+EBX],EAX
    33 0000002E C7 43 4C [00000000]             	MOV	DWORD [76+EBX],_FS_task
    34 00000035 C7 43 74 00000008               	MOV	DWORD [116+EBX],8
    35 0000003C C7 43 78 00000010               	MOV	DWORD [120+EBX],16
    36 00000043 C7 43 7C 00000008               	MOV	DWORD [124+EBX],8
    37 0000004A C7 83 00000080 00000008         	MOV	DWORD [128+EBX],8
    38 00000054 C7 83 00000084 00000008         	MOV	DWORD [132+EBX],8
    39 0000005E C7 83 00000088 00000008         	MOV	DWORD [136+EBX],8
    40 00000068 6A 01                           	PUSH	1
    41 0000006A 6A 02                           	PUSH	2
    42 0000006C 53                              	PUSH	EBX
    43 0000006D E8 [00000000]                   	CALL	_task_run
    44 00000072 B8 00000001                     	MOV	EAX,1
    45 00000077 89 5E 08                        	MOV	DWORD [8+ESI],EBX
    46 0000007A 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
    47 0000007D 5B                              	POP	EBX
    48 0000007E 5E                              	POP	ESI
    49 0000007F 5D                              	POP	EBP
    50 00000080 C3                              	RET
