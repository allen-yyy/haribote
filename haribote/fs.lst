     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_GetMyObj
     7 00000000                                 	EXTERN	_memman_alloc
     8 00000000                                 	EXTERN	_message_send
     9 00000000                                 	EXTERN	_message_receive
    10 00000000                                 	EXTERN	_dDevs
    11 00000000                                 	EXTERN	_task_alloc
    12 00000000                                 	EXTERN	_memman_alloc_4k
    13 00000000                                 	EXTERN	_task_run
    14 00000000                                 [FILE "fs.c"]
    15                                          [SECTION .data]
    16 00000000                                 LC0:
    17 00000000 46 53 00                        	DB	"FS",0x00
    18                                          [SECTION .text]
    19 00000000                                 	GLOBAL	_FS_task
    20 00000000                                 _FS_task:
    21 00000000 55                              	PUSH	EBP
    22 00000001 89 E5                           	MOV	EBP,ESP
    23 00000003 53                              	PUSH	EBX
    24 00000004 83 EC 60                        	SUB	ESP,96
    25 00000007 8D 5D BC                        	LEA	EBX,DWORD [-68+EBP]
    26 0000000A 68 [00000000]                   	PUSH	LC0
    27 0000000F E8 [00000000]                   	CALL	_GetMyObj
    28 00000014 68 00000200                     	PUSH	512
    29 00000019 68 003C0000                     	PUSH	3932160
    30 0000001E E8 [00000000]                   	CALL	_memman_alloc
    31 00000023 53                              	PUSH	EBX
    32 00000024 68 00002712                     	PUSH	10002
    33 00000029 89 45 C4                        	MOV	DWORD [-60+EBP],EAX
    34 0000002C C7 45 BC 00000001               	MOV	DWORD [-68+EBP],1
    35 00000033 E8 [00000000]                   	CALL	_message_send
    36 00000038 53                              	PUSH	EBX
    37 00000039 68 00002710                     	PUSH	10000
    38 0000003E E8 [00000000]                   	CALL	_message_receive
    39 00000043 83 C4 1C                        	ADD	ESP,28
    40 00000046                                 L2:
    41 00000046 8D 5D 9C                        	LEA	EBX,DWORD [-100+EBP]
    42 00000049 53                              	PUSH	EBX
    43 0000004A 68 00002710                     	PUSH	10000
    44 0000004F E8 [00000000]                   	CALL	_message_receive
    45 00000054 59                              	POP	ECX
    46 00000055 58                              	POP	EAX
    47 00000056 8B 45 9C                        	MOV	EAX,DWORD [-100+EBP]
    48 00000059 83 F8 01                        	CMP	EAX,1
    49 0000005C 75 18                           	JNE	L10
    50 0000005E A1 [00000014]                   	MOV	EAX,DWORD [_dDevs+20]
    51 00000063 53                              	PUSH	EBX
    52 00000064 8B 40 08                        	MOV	EAX,DWORD [8+EAX]
    53 00000067 FF B0 0000012C                  	PUSH	DWORD [300+EAX]
    54 0000006D E8 [00000000]                   	CALL	_message_send
    55 00000072 58                              	POP	EAX
    56 00000073 5A                              	POP	EDX
    57 00000074 EB D0                           	JMP	L2
    58 00000076                                 L10:
    59 00000076 83 F8 02                        	CMP	EAX,2
    60 00000079 75 CB                           	JNE	L2
    61 0000007B 8D 5D BC                        	LEA	EBX,DWORD [-68+EBP]
    62 0000007E 53                              	PUSH	EBX
    63 0000007F 68 00002712                     	PUSH	10002
    64 00000084 E8 [00000000]                   	CALL	_message_send
    65 00000089 53                              	PUSH	EBX
    66 0000008A 68 00002710                     	PUSH	10000
    67 0000008F E8 [00000000]                   	CALL	_message_receive
    68 00000094 83 C4 10                        	ADD	ESP,16
    69 00000097 EB AD                           	JMP	L2
    70 00000099                                 	GLOBAL	_FSEntry
    71 00000099                                 _FSEntry:
    72 00000099 55                              	PUSH	EBP
    73 0000009A 89 E5                           	MOV	EBP,ESP
    74 0000009C 56                              	PUSH	ESI
    75 0000009D 53                              	PUSH	EBX
    76 0000009E 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
    77 000000A1 E8 [00000000]                   	CALL	_task_alloc
    78 000000A6 68 00010000                     	PUSH	65536
    79 000000AB 89 C3                           	MOV	EBX,EAX
    80 000000AD FF 76 04                        	PUSH	DWORD [4+ESI]
    81 000000B0 E8 [00000000]                   	CALL	_memman_alloc_4k
    82 000000B5 05 00010000                     	ADD	EAX,65536
    83 000000BA 89 43 64                        	MOV	DWORD [100+EBX],EAX
    84 000000BD C7 43 4C [00000000]             	MOV	DWORD [76+EBX],_FS_task
    85 000000C4 C7 43 74 00000008               	MOV	DWORD [116+EBX],8
    86 000000CB C7 43 78 00000010               	MOV	DWORD [120+EBX],16
    87 000000D2 C7 43 7C 00000008               	MOV	DWORD [124+EBX],8
    88 000000D9 C7 83 00000080 00000008         	MOV	DWORD [128+EBX],8
    89 000000E3 C7 83 00000084 00000008         	MOV	DWORD [132+EBX],8
    90 000000ED C7 83 00000088 00000008         	MOV	DWORD [136+EBX],8
    91 000000F7 6A 01                           	PUSH	1
    92 000000F9 6A 03                           	PUSH	3
    93 000000FB 53                              	PUSH	EBX
    94 000000FC E8 [00000000]                   	CALL	_task_run
    95 00000101 B8 00000001                     	MOV	EAX,1
    96 00000106 89 5E 08                        	MOV	DWORD [8+ESI],EBX
    97 00000109 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
    98 0000010C 5B                              	POP	EBX
    99 0000010D 5E                              	POP	ESI
   100 0000010E 5D                              	POP	EBP
   101 0000010F C3                              	RET
