     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_GetMyObj
     7 00000000                                 	EXTERN	_boxfill8
     8 00000000                                 	EXTERN	_sprintf
     9 00000000                                 	EXTERN	_putfonts8_asc
    10 00000000                                 	EXTERN	_task_alloc
    11 00000000                                 	EXTERN	_memman_alloc_4k
    12 00000000                                 	EXTERN	_task_run
    13 00000000                                 [FILE "fs.c"]
    14                                          [SECTION .data]
    15 00000000                                 LC0:
    16 00000000 46 53 00                        	DB	"FS",0x00
    17 00000003                                 LC1:
    18 00000003 49 64 65 20 48 44 00            	DB	"Ide HD",0x00
    19 0000000A                                 LC2:
    20 0000000A 66 73 20 74 61 73 6B 72 75 6E   	DB	"fs taskrun %d",0x00
       00000014 20 25 64 00 
    21                                          [SECTION .text]
    22 00000000                                 	GLOBAL	_FS_task
    23 00000000                                 _FS_task:
    24 00000000 55                              	PUSH	EBP
    25 00000001 89 E5                           	MOV	EBP,ESP
    26 00000003 53                              	PUSH	EBX
    27 00000004 83 EC 40                        	SUB	ESP,64
    28 00000007 68 [00000000]                   	PUSH	LC0
    29 0000000C E8 [00000000]                   	CALL	_GetMyObj
    30 00000011 68 [00000003]                   	PUSH	LC1
    31 00000016 E8 [00000000]                   	CALL	_GetMyObj
    32 0000001B 58                              	POP	EAX
    33 0000001C 5A                              	POP	EDX
    34 0000001D                                 L2:
    35 0000001D 6A 0F                           	PUSH	15
    36 0000001F 8D 5D DC                        	LEA	EBX,DWORD [-36+EBP]
    37 00000022 68 000000FF                     	PUSH	255
    38 00000027 6A 00                           	PUSH	0
    39 00000029 6A 00                           	PUSH	0
    40 0000002B 6A 00                           	PUSH	0
    41 0000002D 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    42 00000034 50                              	PUSH	EAX
    43 00000035 FF 35 00000FF8                  	PUSH	DWORD [4088]
    44 0000003B E8 [00000000]                   	CALL	_boxfill8
    45 00000040 6A 64                           	PUSH	100
    46 00000042 68 [0000000A]                   	PUSH	LC2
    47 00000047 53                              	PUSH	EBX
    48 00000048 E8 [00000000]                   	CALL	_sprintf
    49 0000004D 83 C4 28                        	ADD	ESP,40
    50 00000050 53                              	PUSH	EBX
    51 00000051 6A 07                           	PUSH	7
    52 00000053 6A 00                           	PUSH	0
    53 00000055 6A 00                           	PUSH	0
    54 00000057 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    55 0000005E 50                              	PUSH	EAX
    56 0000005F FF 35 00000FF8                  	PUSH	DWORD [4088]
    57 00000065 E8 [00000000]                   	CALL	_putfonts8_asc
    58 0000006A 83 C4 18                        	ADD	ESP,24
    59 0000006D EB AE                           	JMP	L2
    60 0000006F                                 	GLOBAL	_FSEntry
    61 0000006F                                 _FSEntry:
    62 0000006F 55                              	PUSH	EBP
    63 00000070 89 E5                           	MOV	EBP,ESP
    64 00000072 56                              	PUSH	ESI
    65 00000073 53                              	PUSH	EBX
    66 00000074 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
    67 00000077 E8 [00000000]                   	CALL	_task_alloc
    68 0000007C 68 00010000                     	PUSH	65536
    69 00000081 89 C3                           	MOV	EBX,EAX
    70 00000083 FF 76 04                        	PUSH	DWORD [4+ESI]
    71 00000086 E8 [00000000]                   	CALL	_memman_alloc_4k
    72 0000008B 05 00010000                     	ADD	EAX,65536
    73 00000090 89 43 64                        	MOV	DWORD [100+EBX],EAX
    74 00000093 C7 43 4C [00000000]             	MOV	DWORD [76+EBX],_FS_task
    75 0000009A C7 43 74 00000008               	MOV	DWORD [116+EBX],8
    76 000000A1 C7 43 78 00000010               	MOV	DWORD [120+EBX],16
    77 000000A8 C7 43 7C 00000008               	MOV	DWORD [124+EBX],8
    78 000000AF C7 83 00000080 00000008         	MOV	DWORD [128+EBX],8
    79 000000B9 C7 83 00000084 00000008         	MOV	DWORD [132+EBX],8
    80 000000C3 C7 83 00000088 00000008         	MOV	DWORD [136+EBX],8
    81 000000CD 6A 02                           	PUSH	2
    82 000000CF 6A 03                           	PUSH	3
    83 000000D1 53                              	PUSH	EBX
    84 000000D2 E8 [00000000]                   	CALL	_task_run
    85 000000D7 B8 00000001                     	MOV	EAX,1
    86 000000DC 89 5E 08                        	MOV	DWORD [8+ESI],EBX
    87 000000DF 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
    88 000000E2 5B                              	POP	EBX
    89 000000E3 5E                              	POP	ESI
    90 000000E4 5D                              	POP	EBP
    91 000000E5 C3                              	RET
