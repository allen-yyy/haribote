     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_GetMyObj
     7 00000000                                 	EXTERN	_message_send
     8 00000000                                 	EXTERN	_message_receive
     9 00000000                                 	EXTERN	_task_alloc
    10 00000000                                 	EXTERN	_memman_alloc_4k
    11 00000000                                 	EXTERN	_task_run
    12 00000000                                 [FILE "fs.c"]
    13                                          [SECTION .data]
    14 00000000                                 LC0:
    15 00000000 46 53 00                        	DB	"FS",0x00
    16 00000003                                 LC1:
    17 00000003 49 64 65 20 48 44 00            	DB	"Ide HD",0x00
    18                                          [SECTION .text]
    19 00000000                                 	GLOBAL	_FS_task
    20 00000000                                 _FS_task:
    21 00000000 55                              	PUSH	EBP
    22 00000001 89 E5                           	MOV	EBP,ESP
    23 00000003 56                              	PUSH	ESI
    24 00000004 53                              	PUSH	EBX
    25 00000005 83 EC 20                        	SUB	ESP,32
    26 00000008 68 [00000000]                   	PUSH	LC0
    27 0000000D E8 [00000000]                   	CALL	_GetMyObj
    28 00000012 68 [00000003]                   	PUSH	LC1
    29 00000017 E8 [00000000]                   	CALL	_GetMyObj
    30 0000001C C7 03 00000001                  	MOV	DWORD [EBX],1
    31 00000022 53                              	PUSH	EBX
    32 00000023 8B 40 08                        	MOV	EAX,DWORD [8+EAX]
    33 00000026 FF B0 0000012C                  	PUSH	DWORD [300+EAX]
    34 0000002C E8 [00000000]                   	CALL	_message_send
    35 00000031 53                              	PUSH	EBX
    36 00000032 68 00002710                     	PUSH	10000
    37 00000037 E8 [00000000]                   	CALL	_message_receive
    38 0000003C 83 C4 18                        	ADD	ESP,24
    39 0000003F 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
    40 00000042 8B B0 000001E0                  	MOV	ESI,DWORD [480+EAX]
    41 00000048                                 L2:
    42 00000048 53                              	PUSH	EBX
    43 00000049 68 00002710                     	PUSH	10000
    44 0000004E E8 [00000000]                   	CALL	_message_receive
    45 00000053 83 3B 01                        	CMP	DWORD [EBX],1
    46 00000056 59                              	POP	ECX
    47 00000057 58                              	POP	EAX
    48 00000058 75 EE                           	JNE	L2
    49 0000005A 89 F0                           	MOV	EAX,ESI
    50 0000005C C1 E0 09                        	SAL	EAX,9
    51 0000005F C1 E8 1E                        	SHR	EAX,30
    52 00000062 89 43 04                        	MOV	DWORD [4+EBX],EAX
    53 00000065 53                              	PUSH	EBX
    54 00000066 FF 73 0C                        	PUSH	DWORD [12+EBX]
    55 00000069 E8 [00000000]                   	CALL	_message_send
    56 0000006E 58                              	POP	EAX
    57 0000006F 5A                              	POP	EDX
    58 00000070 EB D6                           	JMP	L2
    59 00000072                                 	GLOBAL	_FSEntry
    60 00000072                                 _FSEntry:
    61 00000072 55                              	PUSH	EBP
    62 00000073 89 E5                           	MOV	EBP,ESP
    63 00000075 56                              	PUSH	ESI
    64 00000076 53                              	PUSH	EBX
    65 00000077 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
    66 0000007A E8 [00000000]                   	CALL	_task_alloc
    67 0000007F 68 00010000                     	PUSH	65536
    68 00000084 89 C3                           	MOV	EBX,EAX
    69 00000086 FF 76 04                        	PUSH	DWORD [4+ESI]
    70 00000089 E8 [00000000]                   	CALL	_memman_alloc_4k
    71 0000008E 05 00010000                     	ADD	EAX,65536
    72 00000093 89 43 64                        	MOV	DWORD [100+EBX],EAX
    73 00000096 C7 43 4C [00000000]             	MOV	DWORD [76+EBX],_FS_task
    74 0000009D C7 43 74 00000008               	MOV	DWORD [116+EBX],8
    75 000000A4 C7 43 78 00000010               	MOV	DWORD [120+EBX],16
    76 000000AB C7 43 7C 00000008               	MOV	DWORD [124+EBX],8
    77 000000B2 C7 83 00000080 00000008         	MOV	DWORD [128+EBX],8
    78 000000BC C7 83 00000084 00000008         	MOV	DWORD [132+EBX],8
    79 000000C6 C7 83 00000088 00000008         	MOV	DWORD [136+EBX],8
    80 000000D0 6A 02                           	PUSH	2
    81 000000D2 6A 03                           	PUSH	3
    82 000000D4 53                              	PUSH	EBX
    83 000000D5 E8 [00000000]                   	CALL	_task_run
    84 000000DA B8 00000001                     	MOV	EAX,1
    85 000000DF 89 5E 08                        	MOV	DWORD [8+ESI],EBX
    86 000000E2 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
    87 000000E5 5B                              	POP	EBX
    88 000000E6 5E                              	POP	ESI
    89 000000E7 5D                              	POP	EBP
    90 000000E8 C3                              	RET
