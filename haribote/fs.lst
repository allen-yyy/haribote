     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_message_send
     7 00000000                                 	EXTERN	_message_receive
     8 00000000                                 	EXTERN	_io_hlt
     9 00000000                                 	EXTERN	_task_alloc
    10 00000000                                 	EXTERN	_memman_alloc_4k
    11 00000000                                 	EXTERN	_task_run
    12 00000000                                 [FILE "fs.c"]
    13                                          [SECTION .text]
    14 00000000                                 	GLOBAL	_FS_task
    15 00000000                                 _FS_task:
    16 00000000 55                              	PUSH	EBP
    17 00000001 89 E5                           	MOV	EBP,ESP
    18 00000003 56                              	PUSH	ESI
    19 00000004 53                              	PUSH	EBX
    20 00000005 31 F6                           	XOR	ESI,ESI
    21 00000007 A1 00000F01                     	MOV	EAX,DWORD [3841]
    22 0000000C C7 03 00000001                  	MOV	DWORD [EBX],1
    23 00000012 53                              	PUSH	EBX
    24 00000013 FF B0 0000012C                  	PUSH	DWORD [300+EAX]
    25 00000019 E8 [00000000]                   	CALL	_message_send
    26 0000001E 53                              	PUSH	EBX
    27 0000001F 68 00002710                     	PUSH	10000
    28 00000024 E8 [00000000]                   	CALL	_message_receive
    29 00000029 83 C4 10                        	ADD	ESP,16
    30 0000002C                                 L2:
    31 0000002C 46                              	INC	ESI
    32 0000002D 89 35 00000EF0                  	MOV	DWORD [3824],ESI
    33 00000033 E8 [00000000]                   	CALL	_io_hlt
    34 00000038 EB F2                           	JMP	L2
    35 0000003A                                 	GLOBAL	_FSEntry
    36 0000003A                                 _FSEntry:
    37 0000003A 55                              	PUSH	EBP
    38 0000003B 89 E5                           	MOV	EBP,ESP
    39 0000003D 53                              	PUSH	EBX
    40 0000003E E8 [00000000]                   	CALL	_task_alloc
    41 00000043 68 00010000                     	PUSH	65536
    42 00000048 89 C3                           	MOV	EBX,EAX
    43 0000004A 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
    44 0000004D FF 70 04                        	PUSH	DWORD [4+EAX]
    45 00000050 E8 [00000000]                   	CALL	_memman_alloc_4k
    46 00000055 05 00010000                     	ADD	EAX,65536
    47 0000005A 89 43 64                        	MOV	DWORD [100+EBX],EAX
    48 0000005D C7 43 4C [00000000]             	MOV	DWORD [76+EBX],_FS_task
    49 00000064 C7 43 74 00000008               	MOV	DWORD [116+EBX],8
    50 0000006B C7 43 78 00000010               	MOV	DWORD [120+EBX],16
    51 00000072 C7 43 7C 00000008               	MOV	DWORD [124+EBX],8
    52 00000079 C7 83 00000080 00000008         	MOV	DWORD [128+EBX],8
    53 00000083 C7 83 00000084 00000008         	MOV	DWORD [132+EBX],8
    54 0000008D C7 83 00000088 00000008         	MOV	DWORD [136+EBX],8
    55 00000097 6A 01                           	PUSH	1
    56 00000099 6A 04                           	PUSH	4
    57 0000009B 53                              	PUSH	EBX
    58 0000009C E8 [00000000]                   	CALL	_task_run
    59 000000A1 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
    60 000000A4 B8 00000001                     	MOV	EAX,1
    61 000000A9 C9                              	LEAVE
    62 000000AA C3                              	RET
