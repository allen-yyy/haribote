     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_FSEntry
     7 00000000                                 	EXTERN	_HDEntry
     8 00000000                                 	EXTERN	_strcmp
     9 00000000                                 [FILE "driver.c"]
    10 00000000                                 	GLOBAL	_dDevs
    11                                          [SECTION .data]
    12 00000000                                 LC0:
    13 00000000 46 53 00                        	DB	"FS",0x00
    14 00000003                                 LC1:
    15 00000003 49 64 65 20 48 44 00            	DB	"Ide HD",0x00
    16 0000000A 00 00                           	ALIGNB	4
    17 0000000C                                 _dDevs:
    18 0000000C [00000000]                      	DD	LC0
    19 00000010 [00000000]                      	DD	_FSEntry
    20 00000014 00 00 00 00                     	RESB	4
    21 00000018 [00000003]                      	DD	LC1
    22 0000001C [00000000]                      	DD	_HDEntry
    23 00000020 00 00 00 00                     	RESB	4
    24 00000024                                 	GLOBAL	_etable
    25 00000024                                 LC2:
    26 00000024 48 41 46 53 00                  	DB	"HAFS",0x00
    27 00000029                                 LC3:
    28 00000029 68 61 66 73 2E 73 79 73 00      	DB	"hafs.sys",0x00
    29 00000032                                 LC4:
    30 00000032 49 4F 00                        	DB	"IO",0x00
    31 00000035                                 LC5:
    32 00000035 69 6F 2E 73 79 73 00            	DB	"io.sys",0x00
    33 0000003C                                 LC6:
    34 0000003C 4E 45 54 00                     	DB	"NET",0x00
    35 00000040                                 LC7:
    36 00000040 6E 65 74 2E 73 79 73 00         	DB	"net.sys",0x00
    37 00000048                                 LC8:
    38 00000048 53 45 54 4D 00                  	DB	"SETM",0x00
    39 0000004D                                 LC9:
    40 0000004D 73 65 74 6D 2E 73 79 73 00      	DB	"setm.sys",0x00
    41 00000056                                 LC10:
    42 00000056 53 45 54 48 00                  	DB	"SETH",0x00
    43 0000005B                                 LC11:
    44 0000005B 73 65 74 68 2E 73 79 73 00      	DB	"seth.sys",0x00
    45 00000064                                 _etable:
    46 00000064 [00000024]                      	DD	LC2
    47 00000068 [00000029]                      	DD	LC3
    48 0000006C 00 00 00 00                     	RESB	4
    49 00000070 [00000032]                      	DD	LC4
    50 00000074 [00000035]                      	DD	LC5
    51 00000078 00 00 00 00                     	RESB	4
    52 0000007C [0000003C]                      	DD	LC6
    53 00000080 [00000040]                      	DD	LC7
    54 00000084 00 00 00 00                     	RESB	4
    55 00000088 [00000048]                      	DD	LC8
    56 0000008C [0000004D]                      	DD	LC9
    57 00000090 00 00 00 00                     	RESB	4
    58 00000094 [00000056]                      	DD	LC10
    59 00000098 [0000005B]                      	DD	LC11
    60 0000009C 00 00 00 00                     	RESB	4
    61                                          [SECTION .text]
    62 00000000                                 	GLOBAL	_LDevs
    63 00000000                                 _LDevs:
    64 00000000 55                              	PUSH	EBP
    65 00000001 89 E5                           	MOV	EBP,ESP
    66 00000003 57                              	PUSH	EDI
    67 00000004 56                              	PUSH	ESI
    68 00000005 31 F6                           	XOR	ESI,ESI
    69 00000007 53                              	PUSH	EBX
    70 00000008 31 DB                           	XOR	EBX,EBX
    71 0000000A 83 EC 10                        	SUB	ESP,16
    72 0000000D 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
    73 00000010                                 L7:
    74 00000010 8B 83 [0000000C]                	MOV	EAX,DWORD [_dDevs+EBX]
    75 00000016 89 7D E8                        	MOV	DWORD [-24+EBP],EDI
    76 00000019 89 45 E4                        	MOV	DWORD [-28+EBP],EAX
    77 0000001C 8D 45 E4                        	LEA	EAX,DWORD [-28+EBP]
    78 0000001F 50                              	PUSH	EAX
    79 00000020 89 83 [00000014]                	MOV	DWORD [_dDevs+8+EBX],EAX
    80 00000026 FF 93 [00000010]                	CALL	DWORD [_dDevs+4+EBX]
    81 0000002C 5A                              	POP	EDX
    82 0000002D 31 D2                           	XOR	EDX,EDX
    83 0000002F 85 C0                           	TEST	EAX,EAX
    84 00000031 75 0E                           	JNE	L1
    85 00000033 46                              	INC	ESI
    86 00000034 83 C3 0C                        	ADD	EBX,12
    87 00000037 83 FE 01                        	CMP	ESI,1
    88 0000003A 7E D4                           	JLE	L7
    89 0000003C BA 00000001                     	MOV	EDX,1
    90 00000041                                 L1:
    91 00000041 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
    92 00000044 89 D0                           	MOV	EAX,EDX
    93 00000046 5B                              	POP	EBX
    94 00000047 5E                              	POP	ESI
    95 00000048 5F                              	POP	EDI
    96 00000049 5D                              	POP	EBP
    97 0000004A C3                              	RET
    98 0000004B                                 	GLOBAL	_GetMyObj
    99 0000004B                                 _GetMyObj:
   100 0000004B 55                              	PUSH	EBP
   101 0000004C 89 E5                           	MOV	EBP,ESP
   102 0000004E 57                              	PUSH	EDI
   103 0000004F 56                              	PUSH	ESI
   104 00000050 31 F6                           	XOR	ESI,ESI
   105 00000052 53                              	PUSH	EBX
   106 00000053 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
   107 00000056 31 DB                           	XOR	EBX,EBX
   108 00000058                                 L16:
   109 00000058 57                              	PUSH	EDI
   110 00000059 FF B3 [0000000C]                	PUSH	DWORD [_dDevs+EBX]
   111 0000005F E8 [00000000]                   	CALL	_strcmp
   112 00000064 59                              	POP	ECX
   113 00000065 5A                              	POP	EDX
   114 00000066 85 C0                           	TEST	EAX,EAX
   115 00000068 74 13                           	JE	L19
   116 0000006A 46                              	INC	ESI
   117 0000006B 83 C3 0C                        	ADD	EBX,12
   118 0000006E 83 FE 01                        	CMP	ESI,1
   119 00000071 7E E5                           	JLE	L16
   120 00000073 31 C0                           	XOR	EAX,EAX
   121 00000075                                 L10:
   122 00000075 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   123 00000078 5B                              	POP	EBX
   124 00000079 5E                              	POP	ESI
   125 0000007A 5F                              	POP	EDI
   126 0000007B 5D                              	POP	EBP
   127 0000007C C3                              	RET
   128 0000007D                                 L19:
   129 0000007D 8B 83 [00000014]                	MOV	EAX,DWORD [_dDevs+8+EBX]
   130 00000083 EB F0                           	JMP	L10
