     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_HDEntry
     7 00000000                                 	EXTERN	_FSEntry
     8 00000000                                 	EXTERN	_io_cli
     9 00000000                                 	EXTERN	_strcmp
    10 00000000                                 [FILE "driver.c"]
    11 00000000                                 	GLOBAL	_dDevs
    12                                          [SECTION .data]
    13 00000000                                 LC0:
    14 00000000 49 64 65 20 48 44 00            	DB	"Ide HD",0x00
    15 00000007                                 LC1:
    16 00000007 46 53 00                        	DB	"FS",0x00
    17 0000000A 00 00                           	ALIGNB	4
    18 0000000C                                 _dDevs:
    19 0000000C [00000000]                      	DD	LC0
    20 00000010 [00000000]                      	DD	_HDEntry
    21 00000014 00 00 00 00                     	RESB	4
    22 00000018 [00000007]                      	DD	LC1
    23 0000001C [00000000]                      	DD	_FSEntry
    24 00000020 00 00 00 00                     	RESB	4
    25 00000024                                 	GLOBAL	_etable
    26 00000024                                 LC2:
    27 00000024 48 41 46 53 00                  	DB	"HAFS",0x00
    28 00000029                                 LC3:
    29 00000029 68 61 66 73 2E 73 79 73 00      	DB	"hafs.sys",0x00
    30 00000032                                 LC4:
    31 00000032 49 4F 00                        	DB	"IO",0x00
    32 00000035                                 LC5:
    33 00000035 69 6F 2E 73 79 73 00            	DB	"io.sys",0x00
    34 0000003C                                 LC6:
    35 0000003C 4E 45 54 00                     	DB	"NET",0x00
    36 00000040                                 LC7:
    37 00000040 6E 65 74 2E 73 79 73 00         	DB	"net.sys",0x00
    38 00000048                                 LC8:
    39 00000048 53 45 54 4D 00                  	DB	"SETM",0x00
    40 0000004D                                 LC9:
    41 0000004D 73 65 74 6D 2E 73 79 73 00      	DB	"setm.sys",0x00
    42 00000056                                 LC10:
    43 00000056 53 45 54 48 00                  	DB	"SETH",0x00
    44 0000005B                                 LC11:
    45 0000005B 73 65 74 68 2E 73 79 73 00      	DB	"seth.sys",0x00
    46 00000064                                 _etable:
    47 00000064 [00000024]                      	DD	LC2
    48 00000068 [00000029]                      	DD	LC3
    49 0000006C 00 00 00 00                     	RESB	4
    50 00000070 [00000032]                      	DD	LC4
    51 00000074 [00000035]                      	DD	LC5
    52 00000078 00 00 00 00                     	RESB	4
    53 0000007C [0000003C]                      	DD	LC6
    54 00000080 [00000040]                      	DD	LC7
    55 00000084 00 00 00 00                     	RESB	4
    56 00000088 [00000048]                      	DD	LC8
    57 0000008C [0000004D]                      	DD	LC9
    58 00000090 00 00 00 00                     	RESB	4
    59 00000094 [00000056]                      	DD	LC10
    60 00000098 [0000005B]                      	DD	LC11
    61 0000009C 00 00 00 00                     	RESB	4
    62                                          [SECTION .text]
    63 00000000                                 	GLOBAL	_LDevs
    64 00000000                                 _LDevs:
    65 00000000 55                              	PUSH	EBP
    66 00000001 89 E5                           	MOV	EBP,ESP
    67 00000003 57                              	PUSH	EDI
    68 00000004 56                              	PUSH	ESI
    69 00000005 31 F6                           	XOR	ESI,ESI
    70 00000007 53                              	PUSH	EBX
    71 00000008 31 DB                           	XOR	EBX,EBX
    72 0000000A 83 EC 10                        	SUB	ESP,16
    73 0000000D 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
    74 00000010 E8 [00000000]                   	CALL	_io_cli
    75 00000015                                 L7:
    76 00000015 8B 83 [0000000C]                	MOV	EAX,DWORD [_dDevs+EBX]
    77 0000001B 89 7D E8                        	MOV	DWORD [-24+EBP],EDI
    78 0000001E 89 45 E4                        	MOV	DWORD [-28+EBP],EAX
    79 00000021 8D 45 E4                        	LEA	EAX,DWORD [-28+EBP]
    80 00000024 50                              	PUSH	EAX
    81 00000025 89 83 [00000014]                	MOV	DWORD [_dDevs+8+EBX],EAX
    82 0000002B FF 93 [00000010]                	CALL	DWORD [_dDevs+4+EBX]
    83 00000031 5A                              	POP	EDX
    84 00000032 31 D2                           	XOR	EDX,EDX
    85 00000034 85 C0                           	TEST	EAX,EAX
    86 00000036 74 0E                           	JE	L1
    87 00000038 46                              	INC	ESI
    88 00000039 83 C3 0C                        	ADD	EBX,12
    89 0000003C 83 FE 01                        	CMP	ESI,1
    90 0000003F 7E D4                           	JLE	L7
    91 00000041 BA 00000001                     	MOV	EDX,1
    92 00000046                                 L1:
    93 00000046 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
    94 00000049 89 D0                           	MOV	EAX,EDX
    95 0000004B 5B                              	POP	EBX
    96 0000004C 5E                              	POP	ESI
    97 0000004D 5F                              	POP	EDI
    98 0000004E 5D                              	POP	EBP
    99 0000004F C3                              	RET
   100 00000050                                 	GLOBAL	_GetMyObj
   101 00000050                                 _GetMyObj:
   102 00000050 55                              	PUSH	EBP
   103 00000051 89 E5                           	MOV	EBP,ESP
   104 00000053 57                              	PUSH	EDI
   105 00000054 56                              	PUSH	ESI
   106 00000055 31 F6                           	XOR	ESI,ESI
   107 00000057 53                              	PUSH	EBX
   108 00000058 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
   109 0000005B 31 DB                           	XOR	EBX,EBX
   110 0000005D                                 L16:
   111 0000005D 57                              	PUSH	EDI
   112 0000005E FF B3 [0000000C]                	PUSH	DWORD [_dDevs+EBX]
   113 00000064 E8 [00000000]                   	CALL	_strcmp
   114 00000069 59                              	POP	ECX
   115 0000006A 5A                              	POP	EDX
   116 0000006B 85 C0                           	TEST	EAX,EAX
   117 0000006D 74 13                           	JE	L19
   118 0000006F 46                              	INC	ESI
   119 00000070 83 C3 0C                        	ADD	EBX,12
   120 00000073 83 FE 01                        	CMP	ESI,1
   121 00000076 7E E5                           	JLE	L16
   122 00000078 31 C0                           	XOR	EAX,EAX
   123 0000007A                                 L10:
   124 0000007A 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   125 0000007D 5B                              	POP	EBX
   126 0000007E 5E                              	POP	ESI
   127 0000007F 5F                              	POP	EDI
   128 00000080 5D                              	POP	EBP
   129 00000081 C3                              	RET
   130 00000082                                 L19:
   131 00000082 8B 83 [00000014]                	MOV	EAX,DWORD [_dDevs+8+EBX]
   132 00000088 EB F0                           	JMP	L10
